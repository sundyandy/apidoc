{extend name="base/base" /}

{block name="title"}项目明细{/block}
{block name="sub_title"}{$projectInfo.project_name} <small>{$projectInfo.description}</small>{/block}

{block name="content"}
<div class="row">
    <div class="col-md-3">
        <div class="tree well">
            <ul>
                {volist name="menu_list" id="vo"}
                <li>
                    {neq name="vo.type" value="5"}
                        <a href="{:url('project/info',['id'=>$projectInfo.id,'page_id'=>$vo.id])}">{$vo.title}</a>
                        {else/}
                        {$vo.title}
                    {/neq}

                    {eq name="vo.has_child" value="1"}
                    <ul>
                        {volist name="vo.child" id="child"}
                        <li>
                            {neq name="child.type" value="5"}
                            <a href="{:url('project/info',['id'=>$projectInfo.id,'page_id'=>$child.id])}">{$child.title}</a>
                            {else/}
                            {$child.title}
                            {/neq}
                            <!--level3-->
                            {eq name="child.has_child" value="1"}
                            <ul>
                                {volist name="child.child" id="childchild"}
                                <li>
                                    {neq name="childchild.type" value="5"}
                                    <a href="{:url('project/info',['id'=>$projectInfo.id,'page_id'=>$childchild.id])}">{$childchild.title}</a>
                                    {else/}
                                    {$childchild.title}
                                    {/neq}
                                </li>
                                {/volist}
                            </ul>
                        </li>
                        {else/}
                        </li>
                        {/eq}
                        <!--level3-->

                        </li>
                        {/volist}
                    </ul>
                </li>
                {else/}
                </li>
                {/eq}
                {/volist}
                <li class="level1">
                    <a href="{:url('/project/menu',['project_id'=>$projectInfo.id])}">*管理菜单*</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="col-md-8">
        {eq name="content" value=""}
            <h1>暂无历史记录</h1>
        {else/}
            <table class="table table-bordered table-striped">
                <tr>
                    <th>操作日期</th>
                    <th>操作人</th>
                    <th>操作类型</th>
                    <th>主体</th>
                </tr>
                {volist name="content" id="vo"}
                    <tr>
                        <td>{$vo.operator_date}</td>
                        <td>{$vo.realname}</td>
                        <td>{$vo.type}</td>
                        <td>{$vo.title}</td>
                    </tr>
                {/volist}
            </table>

        {/eq}
    </div>
</div>

<script>
    $(function () {
        $('.tree li:has(ul)').addClass('parent_li').find(' > span').attr('title', 'Collapse this branch');
        $('.tree li.parent_li > span').on('click', function (e) {
            var children = $(this).parent('li.parent_li').find(' > ul > li');
            if (children.is(":visible")) {
                children.hide('fast');
                $(this).attr('title', 'Expand this branch').find(' > i').addClass('icon-plus-sign').removeClass('icon-minus-sign');
            } else {
                children.show('fast');
                $(this).attr('title', 'Collapse this branch').find(' > i').addClass('icon-minus-sign').removeClass('icon-plus-sign');
            }
            e.stopPropagation();
        });
    });
</script>
{/block}