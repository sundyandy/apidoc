{extend name="base/base" /}

{block name="title"}项目明细{/block}
{block name="sub_title"}{$project_info.project_name} <small>{$project_info.description}</small>{/block}

{block name="content"}
<div class="row">
    <div class="col-md-3">
        <div class="tree well">
            <ul>
                {volist name="menu_list" id="vo"}
                <li>
                    {neq name="vo.type" value="5"}
                        <a href="{:url('project/info',['id'=>$project_info.id,'page_id'=>$vo.id])}">{$vo.title}</a>
                        {else/}
                        {$vo.title}
                    {/neq}

                    {eq name="vo.has_child" value="1"}
                    <ul>
                        {volist name="vo.child" id="child"}
                        <li>
                            {neq name="child.type" value="5"}
                            <a href="{:url('project/info',['id'=>$project_info.id,'page_id'=>$child.id])}">{$child.title}</a>
                            {else/}
                            {$child.title}
                            {/neq}
                            <!--level3-->
                            {eq name="child.has_child" value="1"}
                            <ul>
                                {volist name="child.child" id="childchild"}
                                <li>
                                    {neq name="childchild.type" value="5"}
                                    <a href="{:url('project/info',['id'=>$project_info.id,'page_id'=>$childchild.id])}">{$childchild.title}</a>
                                    {else/}
                                    {$childchild.title}
                                    {/neq}
                                </li>
                                {/volist}
                            </ul>
                        </li>
                        {else/}
                        </li>
                        {/eq}
                        <!--level3-->

                        </li>
                        {/volist}
                    </ul>
                </li>
                {else/}
                </li>
                {/eq}
                {/volist}
                <li class="level1">
                    <a href="{:url('/project/menu',['project_id'=>$project_info.id])}">*管理菜单*</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="col-md-8">
        <h1>{$page_info.title|default=''}</h1>

        <blockquote>
            <p>{$api_info.info.descrition|default=''}</p>
        </blockquote>
        <hr>
        <p class="bg-info h3title">API URI:</p>
        <li>{$api_info.info.uri|default=''}</li>
        <p class="bg-info h3title">Method:</p>
        <li>{$api_info.info.method|default=''}</li>
        <p class="bg-info h3title">备注:</p>
        <li>{$api_info.info.remark|default=''}</li>
        <p class="bg-info h3title">返回json示例:</p>
        <li>{$api_info.info.response|default=''}</li>
        <p class="bg-info h3title">入参:</p>
            <table class="table table-bordered table-striped">
                <tr>
                    <th width="25%">字段名称</th>
                    <th width="25%">是否必填</th>
                    <th width="25%">类型</th>
                    <th width="25%">备注</th>
                </tr>
                {volist name="api_info.request" id="request"}
                <tr>
                    <td>{$request.param}</td>
                    <td>{eq name="request.is_must" value="1"} <font color="red">*</font> {else/}  {/eq}</td>
                    <td>{$request.type}</td>
                    <td>{$request.remark}</td>
                </tr>
                {/volist}
            </table>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tree li:has(ul)').addClass('parent_li').find(' > span').attr('title', 'Collapse this branch');
        $('.tree li.parent_li > span').on('click', function (e) {
            var children = $(this).parent('li.parent_li').find(' > ul > li');
            if (children.is(":visible")) {
                children.hide('fast');
                $(this).attr('title', 'Expand this branch').find(' > i').addClass('icon-plus-sign').removeClass('icon-minus-sign');
            } else {
                children.show('fast');
                $(this).attr('title', 'Collapse this branch').find(' > i').addClass('icon-minus-sign').removeClass('icon-plus-sign');
            }
            e.stopPropagation();
        });
    });
</script>
{/block}